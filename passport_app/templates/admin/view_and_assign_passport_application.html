<!DOCTYPE html>
{% extends 'home.html' %}
{% block content %} 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passport Application Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        h3 {
            color: #007bff;
            margin-top: 20px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
        p {
            margin: 10px 0;
            line-height: 1.6;
        }
        span {
            font-weight: bold;
            color: #555;
        }
        .section {
            margin-bottom: 20px;
        }
        .highlight {
            background-color: #e7f3ff;
            padding: 10px;
            border-left: 5px solid #007bff;
            border-radius: 4px;
        }

        .styled-select {
        padding: 10px;
        border: 1px solid #007bff;
        border-radius: 5px;
        background-color: #f8f9fa;
        color: #333;
        font-size: 16px;
        cursor: pointer;
        transition: border-color 0.3s ease;
        width: 250px; /* Adjust width as needed */
    }

    .styled-select:focus {
        outline: none;
        border-color: #0056b3; /* Darker blue on focus */
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }

    .btn {
        display: inline-block;
        margin-left: 10px;
    }

    /* progress bar */
    .progress-container {
        width: 100%; /* Full width */
        background-color: #e0e0e0; /* Light gray background */
        border-radius: 5px; /* Rounded corners */
        overflow: hidden; /* Prevents overflow of inner elements */
        position: relative; /* For positioning the label */
        height: 30px; /* Height of the progress bar */
        margin: 10px 0; /* Margin for spacing */
    }

    .progress-bar {
        height: 100%; /* Full height of the container */
        width: 100%; /* Full width for approved */
        background-color: #28a745; /* Green color for approved */
        transition: width 0.4s ease; /* Smooth transition */
        display: flex; /* Flexbox for centering the label */
        align-items: center; /* Center vertically */
        justify-content: center; /* Center horizontally */
        color: white; /* Text color */
        font-weight: bold; /* Bold text */
    }

    .progress-label {
        position: absolute; /* Positioning the label */
        left: 50%; /* Center horizontally */
        transform: translateX(-50%); /* Adjust for centering */
        font-size: 16px; /* Font size */
    }

    /* Optional: Add styles for different statuses */
    .approved {
        background-color: #28a745; /* Green for approved */
    }

    .pending {
        background-color: #ffc107; /* Yellow for pending */
    }

    .rejected {
        background-color: #dc3545; /* Red for rejected */
    }
    </style>
</head>
<body>
    <div class="container m-3">
        <div class="section"> 
            <h2>View : <span>{{passport}}</span></h2>
            <p>Application ID: <span>{{ passport.id }}</span></p>
            <div class="d-flex justify-content-end">
                <a href="{% url 'home' %}" ><button class="btn btn-outline-primary">Back to dashboard</button></a>
            </div>
            
        </div>
        <div class="section">
            <h3>Personal Information</h3>
            <p>First Name: <span>{{ passport.first_name }}</span></p>
            <p>Middle Name: <span>{{ passport.middle_name }}</span></p>
            <p>Last Name: <span>{{ passport.last_name }}</span></p>
            <p>Date of Birth: <span>{{ passport.date_of_birth }}</span></p>
            <p>City of Birth: <span>{{ passport.city_of_birth }}</span></p>
            <p>State of Birth: <span>{{ passport.state_of_birth }}</span></p>
            <p>Country of Birth: <span>{{ passport.country_of_birth }}</span></p>
            <p>Gender: <span>{{ passport.get_gender_display }}</span></p>
            <p>Marital Status: <span>{{ passport.get_marital_status_display }}</span></p>
            <p>Nationality: <span>{{ passport.nationality }}</span></p>
            <p>Occupation: <span>{{ passport.occupation }}</span></p>
        </div>
    
        <div class="section">
            <h3>Contact Information</h3>
            <p>Address Line 1: <span>{{ passport.address_line1 }}</span></p>
            <p>Address Line 2: <span>{{ passport.address_line2 }}</span></p>
            <p>City: <span>{{ passport.city }}</span></p>
            <p>State: <span>{{ passport.state }}</span></p>
            <p>Postal Code: <span>{{ passport.postal_code }}</span></p>
            <p>Country: <span>{{ passport.country }}</span></p>
            <p>Phone Number: <span>{{ passport.phone_number }}</span></p>
            <p>Email: <span>{{ passport.email }}</span></p>
        </div>
    
        <div class="section">
            <h3>Identification Details</h3>
            <p>ID Type: <span>{{ passport.get_id_type_display }}</span></p>
            <p>ID Number: <span>{{ passport.id_number }}</span></p>
        </div>
    
        <div class="section">
            <h3>Parental Information</h3>
            <p>Father's Name: <span>{{ passport.father_name }}</span></p>
            <p>Mother's Name: <span>{{ passport.mother_name }}</span></p>
            <p>Father's Nationality: <span>{{ passport.father_nationality }}</span></p>
            <p>Mother's Nationality: <span>{{ passport.mother_nationality }}</span></p>
            <p>Father's Passport Number: <span>{{ passport.father_passport_number }}</span></p>
            <p>Mother's Passport Number: <span>{{ passport.mother_passport_number }}</span></p>
        </div>
    
        <div class="section">
            <h3>Emergency Contact</h3>
            <p>Emergency Contact Name: <span>{{ passport.emergency_contact_name }}</span></p>
            <p>Relationship: <span>{{ passport.emergency_contact_relationship }}</span></p>
            <p>Phone: <span>{{ passport.emergency_contact_phone }}</span></p>
            <p>Address: <span>{{ passport.emergency_contact_address }}</span></p>
        </div>
    
        <div class="section">
            <h3>Passport Type & Details</h3>
            <p>Passport Type: <span>{{ passport.get_passport_type_display }}</span></p>
            <p>Page Count: <span>{{ passport.get_page_count_display }}</span></p>
            <p>Travel Purpose: <span>{{ passport.get_travel_purpose_display }}</span></p>
        </div>
    
        <div class="section">
            <h3>Supporting Documents</h3>
            <p>Proof of Identity: <span>{{ passport.proof_of_identity|join:", " }}</span></p>
            <p>Proof of Address: <span>{{ passport.proof_of_address|join:", " }}</span></p>
            <p>Additional Documents: <span>{{ passport.additional_documents }}</span></p>
        </div>
    
        <div class="section">
            <h3>Payment Details</h3>
            <p>Payment Method: <span>{{ passport.payment_method|join:", " }}</span></p>
            <p>Expedited Service: <span>{{ passport.expedited_service|yesno:"Yes,No" }}</span></p>
            <p>Total Amount: <span>{{ passport.total_amount }}</span></p>
        </div>
    
        <div class="section">
            <h3>Declaration & Signature</h3>
            {% if passport.signature_file %}
            <p>Signature: <span><img src="{{ passport.signature_file.url }}" alt="Signature" style="max-width: 200px;"/></span></p>
            {% endif %}
            
            <p>Application Date: <span>{{ passport.application_date }}</span></p>
            <p>Parental Consent: <span>{{ passport.parental_consent|yesno:"Yes,No" }}</span></p>
            <p>Terms Agreed: <span>{{ passport.terms_agreed|yesno:"Yes,No" }}</span></p>
        </div>
    
        
    
        <!-- <h3>Declaration & Signature</h3> -->
        <div class="section">
            
            <h3>Verification Details</h3>

            {% if messages %}
            <div class="container mt-3">
                {% for message in messages %}
                    <div class="alert alert-danger" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
            {% endif %}

            <form method="post" action="{% url 'save_passport_application' %}">
                {% csrf_token %}
                <input type="hidden" name="passport_id" value="{{ passport.id }}">
                <h5 class="m-5">Assign verification officer : 
                    <span class="">
                        <select class="styled-select" name="verification_officer_id">
                            <option value="" disabled selected>select verification officer</option>
                            {% for officer in verification_officer %}
                            <option value="{{officer.id}}">{{ officer }}</option>
                            {% endfor %}  
                        </select>
                    </span>
                    {% if PassportVerification_data %}
                    <h5 class="ms-5">Assigned officer : <span>{{PassportVerification_data.verification_officer}}</span></h5>
                    {% else %}
                    
                    {% endif %} 
                </h5>
                <h5 class="m-5">Verfication officer action :
                    <span>
                        <span>{{PassportVerification_data.verification_status}}</span>
                    </span>
                </h5>
                <button type="submit" class="btn btn-primary">Assign</button>
            </form>
            <hr>
            {% if PassportVerification_data.verification_status == 'Approved' %}
            
            <form method="post" action="{% url 'admin_update_passport_status' p_id=PassportVerification_data.id %}">
                {% csrf_token %}
                <h5 class="m-5">Admin Action : 
                    
                    <span>
                            
                        <span class="" >
                            <select class="styled-select" name="admin_action">
                                <option value="" disabled selected>None</option>
                                <option>Pending</option>
                                <option>Rejected</option>
                                <option>Approved</option>
                            </select>
                        </span>
                        
                    </span>

                </h5>
                <h5 class="m-5">Admin Verification Status : <span><progressbar class="ms-4">{{PassportVerification_data.admin_verification}}</progressbar></span></h5>


                <div class="form-group m-5">
                    <label for="admin-remarks" class="form-label">Admin Remarks:</label>
                    <textarea id="admin-remarks" name="admin_remarks" class="form-control" rows="4" placeholder="Enter your remarks here..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary">Update</button>
            </form>
            {% endif %} 
                
            
        </div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
{% endblock %}